{% extends "generator/base.html" %}
{% load skill_filters %}

{% block title %}Character Sheet - Pillars{% endblock %}

{% block extra_css %}
.markdown-output {
    background: #fff;
    border: 1px solid #ccc;
    padding: 20px;
    font-family: monospace;
    font-size: 14px;
    white-space: pre-wrap;
    line-height: 1.4;
}
.copy-btn {
    margin-bottom: 10px;
}
{% endblock %}

{% block content %}
<div class="top-bar">
    <h1>Character Sheet</h1>
    <div>
        <button onclick="copyToClipboard()" class="btn copy-btn">Copy to Clipboard</button>
        <a href="{% url 'welcome' %}" class="btn">&larr; Home</a>
    </div>
</div>

<div class="markdown-output" id="character-sheet">{{ character_data.str_repr }}</div>

<form method="post" action="{% url 'generator' %}">
    {% csrf_token %}
    {% include "generator/partials/control_section.html" %}
</form>

<script>
function copyToClipboard() {
    var text = document.getElementById('character-sheet').innerText;
    navigator.clipboard.writeText(text).then(function() {
        alert('Character sheet copied to clipboard!');
    }).catch(function(err) {
        var textarea = document.createElement('textarea');
        textarea.value = text;
        document.body.appendChild(textarea);
        textarea.select();
        document.execCommand('copy');
        document.body.removeChild(textarea);
        alert('Character sheet copied to clipboard!');
    });
}
</script>
{% endblock %}
