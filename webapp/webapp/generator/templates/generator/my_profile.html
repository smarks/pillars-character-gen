{% extends "generator/base.html" %}

{% block title %}My Profile - Pillars{% endblock %}

{% block content %}
<div class="top-bar">
    <h1>My Profile</h1>
</div>

{% if messages %}
<div class="success-box">
    {% for message in messages %}
    <p>{{ message }}</p>
    {% endfor %}
</div>
{% endif %}

<div class="section">
    <h2>Account Information</h2>
    <div class="info-row">
        <span>Username:</span>
        <span>{{ user.username }}</span>
    </div>
    <div class="info-row">
        <span>Roles:</span>
        <span>{{ profile.get_roles_display }}</span>
    </div>
    <div class="info-row">
        <span>Member since:</span>
        <span>{{ user.date_joined|date:"F j, Y" }}</span>
    </div>
</div>

<div class="section">
    <h2>Contact Information</h2>
    <form method="post">
        {% csrf_token %}
        <div class="control-row">
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" value="{{ user.email }}" style="flex: 1; max-width: 300px;">
        </div>
        <div class="control-row">
            <label>Phone:</label>
            <span>{{ profile.phone|default:"Not set" }}</span>
        </div>
        <div class="control-row">
            <label>Discord:</label>
            <span>{{ profile.discord_handle|default:"Not set" }}</span>
        </div>
        <div class="control-row">
            <label>Preferred Contact:</label>
            <span>{{ profile.get_preferred_contact_display|default:"Not set" }}</span>
        </div>
        <div class="button-group">
            <button type="submit" class="primary">Update Email</button>
        </div>
    </form>
    <p style="margin-top: 15px; color: #666; font-size: 0.9em;">
        Contact your game master to update other profile information.
    </p>
</div>

<div class="section">
    <h2>Quick Links</h2>
    <div class="button-group">
        <a href="{% url 'my_characters' %}" class="btn">My Characters</a>
        <a href="{% url 'notes' %}" class="btn">My Notes</a>
    </div>
</div>
{% endblock %}
