{% extends "generator/base.html" %}

{% block title %}My Profile - Pillars{% endblock %}

{% block content %}
<div class="top-bar">
    <h1>My Profile</h1>
</div>

{% if messages %}
<div class="success-box">
    {% for message in messages %}
    <p>{{ message }}</p>
    {% endfor %}
</div>
{% endif %}

<div class="section">
    <h2>Account Information</h2>
    <div class="info-row">
        <span>Username:</span>
        <span>{{ user.username }}</span>
    </div>
    <div class="info-row">
        <span>Roles:</span>
        <span>{{ profile.get_roles_display }}</span>
    </div>
    <div class="info-row">
        <span>Member since:</span>
        <span>{{ user.date_joined|date:"F j, Y" }}</span>
    </div>
</div>

<div class="section">
    <h2>Contact Information</h2>
    <form method="post">
        {% csrf_token %}
        <div class="control-row">
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" value="{{ user.email }}" style="flex: 1; max-width: 300px;">
        </div>
        <div class="control-row">
            <label for="phone">Phone:</label>
            <input type="tel" id="phone" name="phone" value="{{ profile.phone }}" placeholder="Optional" style="flex: 1; max-width: 200px;">
        </div>
        <div class="control-row">
            <label for="discord">Discord:</label>
            <input type="text" id="discord" name="discord" value="{{ profile.discord_handle }}" placeholder="username#1234" style="flex: 1; max-width: 200px;">
        </div>
        <div class="control-row">
            <label for="preferred_contact">Preferred Contact:</label>
            <select id="preferred_contact" name="preferred_contact">
                <option value="">-- Select --</option>
                {% for value, label in contact_choices %}
                <option value="{{ value }}" {% if profile.preferred_contact == value %}selected{% endif %}>{{ label }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="button-group">
            <button type="submit" class="primary">Save Profile</button>
        </div>
    </form>
</div>

<div class="section">
    <h2>Quick Links</h2>
    <div class="button-group">
        <a href="{% url 'my_characters' %}" class="btn">My Characters</a>
        <a href="{% url 'notes' %}" class="btn">My Notes</a>
    </div>
</div>
{% endblock %}
